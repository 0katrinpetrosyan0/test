#!/bin/bash
echo "Start git pre-commit hooks";
echo "Start check for secrets and passwords";
for y in $(find . -print)
    do
        if ! git diff --cached --quiet "${y}" 
        then
            sudo git secrets --install -f;
            sudo git secrets --register-aws --global;
            sudo git secrets --add-provider
            sudo git secrets --scan -r --cached;
        fi
done
echo "Endcheck for secrets and passwords";

echo "End git pre-commit hooks";
