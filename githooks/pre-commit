#!/bin/bash
echo "Start git pre-commit hooks";

git clone https://github.com/awslabs/git-secrets.git;
make install
echo "Start terraform fmt";
for y in $(find . -name '*.tf' -print)
    do
        if ! git diff --cached --quiet "${y}" 
        then
            echo "Formatting the file: ${y}"; 
            terraform fmt -write=true "${y}"
        fi
done
echo "End terraform fmt";

echo "End git pre-commit hooks";
